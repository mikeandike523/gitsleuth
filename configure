#!/bin/bash

# ./configure

# Each project generally has two installation related files

# ./install.sh
# A convenience script to download the original files (for instance, by cloning from git)
# This script typically calls the ./configure script as the last step
# Typically the script is fetched from raw.githubusercontent.com and piped into bash

# ./configure
# Assuming that the necessary files have been copied to a predictable location,
# performs the necessary steps to make the software work on the system


dn="$(dirname "$(realpath "$0")")"
cd "$dn"

python3 -m venv pyenv

chmod +x ./gitsleuth

# __python is a wrapper that simply calls the python executable from the virtual environment
chmod +x ./__python

chmod +x ./safelink.sh

./__python -m pip install --no-cache --force-reinstall -r requirements.txt

./safelink.sh "$dn/gitsleuth" "/usr/local/bin/gitsleuth" 